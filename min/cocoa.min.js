function showTargetMessage(){loadTargetMsg(),msgTrackEvent()}function loadTargetMsg(){var e={title:"影响区域：",list:""},t="http://127.0.0.1:8080/dss-data/gisInfo/gis-info!getTownListByGemotry.action?geomtry="+lastPolygonVertices;$.ajax({type:"GET",url:t,success:function(t){e.list=t,cocoa.clearCompsById(["yjddDiv"]),targetMsgComp.init("yjddDiv",["短信","大喇叭"],"其他",e)}})}function msgTrackEvent(){$("#msgMinMax").unbind(),$("#msgMaxClose").unbind(),$("#msgMinClose").unbind(),$("#msgMinMax").click(function(){cocoa.clearCompsById(["trackMin"]),$("#msgMin").hide(),$("#msgMax").show(),targetTrackComp.initMax("trackMax")}),$("#msgMaxClose").click(function(){cocoa.clearCompsById(["tragetType","tragetKind","tragetChose"]),$("#msgMax").hide(),targetTrackComp.clearTrackInterval()}),$("#msgMinClose").click(function(){cocoa.clearCompsById(["trackMin"]),$("#msgMin").hide(),targetTrackComp.clearTrackInterval()}),mouse4MoveRainWindow("msgMaxTitle","msgMax")}var buttonComp={init:function(e,t,a){var n=document.createElement("div");n.setAttribute("class",t);var i=e.list;for(var r in i){var o=document.createElement("button");o.setAttribute("value",i[r].value),o.innerHTML=i[r].text,n.appendChild(o)}return a&&n.addEventListener("click",function(e){return a(cocoa.getEventTarget(e).attributes.value.value)}),n}},checkBoxComp={init:function(e,t){var a=document.createElement("div");a.setAttribute("class","marTpad");var n=e.list,i=[];if("undefined"!=typeof e.defaultChecked&&(i=e.defaultChecked),"undefined"!=typeof e.title){var r=document.createElement("label");r.setAttribute("class","marR10"),r.innerHTML=e.title,a.appendChild(r)}var o=[],s=[];for(var l in n){var d=document.createElement("input");if(-1!==i.indexOf(n[l].value)){d.setAttribute("checked","checked"),d.setAttribute("status","selected");var c=new Object({});c.value=n[l].value,c.text=n[l].text,o.push(c),s.push(d)}else d.setAttribute("status","");d.setAttribute("type","checkbox"),d.setAttribute("value",n[l].value),d.setAttribute("text",n[l].text);var u=document.createElement("span");u.setAttribute("class","marR10"),u.innerHTML=n[l].text,a.appendChild(d),a.appendChild(u)}this.defaultSelect=s,a.addEventListener("click",function(e){var n=cocoa.getEventTarget(e),i=n.nodeName,r="",o="",s=!0,l=null,d=null;if("INPUT"===i){var c=n.attributes.status;l=n,"selected"===c.value?(c.value="",s=!1):c.value="selected","undefined"!=typeof l.attributes.blindComp&&(d=l.attributes.blindComp),r=n.attributes.value.value,o=n.attributes.text.value;var u=[],p=a.children;for(var m in p)if("INPUT"===p[m].nodeName&&"selected"===p[m].attributes.status.value){var v=new Object({}),g=p[m].attributes.value.value,f=p[m].attributes.text.value;v.id=g+f,v.value=g,v.text=f,v.obj=l,v.blindComp=d,u.push(v)}var C={checkBox:u};if(a.attributes.tempdatas=C,t){var y={};return y.id=r+o,y.value=r,y.text=o,y.obj=l,y.blindComp=d,y.checked=s,t(y)}}});var p={checkBox:o};return a.attributes.tempdatas=p,this.boxDiv=a,a},blindTo:function(e,t){for(var a=this.boxDiv.getElementsByTagName("input"),n=a.length-1;n>=0;n--)if(a[n].getAttribute("value")===t){a[n].attributes.blindComp=e;break}}},cocoa={addComps:function(e,t,a,n,i){var r=document.createElement("div");for(var o in t)t[o].hidden=!1,r.appendChild(t[o]);if(document.getElementById(e).appendChild(r),a){var s=document.getElementById(e).children[0].childNodes;a.addEventListener("click",function(e){var t=cocoa.getEventTarget(e).attributes.value.value;if(""!==n&&null!==n)if(t===n){var r={};for(var o in s)if(s[o]!==a&&"length"!==o&&"item"!==o){if("undefined"!=typeof s[o].attributes.mulComp){var l=s[o].attributes.compList;for(var d in l){var c=l[d].attributes.tempdatas;for(var u in c)r[u]=c[u]}}var p=s[o].attributes.tempdatas;for(var m in p)r[m]=p[m]}if(i)return i(r)}else if(i)return i(t)})}},appendTo:function(e,t){cocoa.insertAdjacentElement(t,"afterend",e)},removeComp:function(e){e.hidden=!0,e.parentNode.removeChild(e)},removeComps:function(e){for(var t in e)this.removeComp(e[t])},clearCompsById:function(e){if(e instanceof Array)for(var t in e){var a=document.getElementById(e[t]).childNodes[0];if("undefined"!=typeof a){for(var n=a.childNodes,i=n.length-1;i>=0;i--)n[i].hidden=!0;document.getElementById(e[t]).removeChild(a)}}else if("undefined"!=typeof document.getElementById(e).childNodes[0])for(var r=document.getElementById(e).childNodes[0].childNodes,o=r.length-1;o>=0;o--)r[o].hidden=!0,document.getElementById(e).removeChild(r[o])},insertTo:function(e,t){if(e.attributes.mulComp=!0,"undefined"!=typeof e.attributes.compList){var a=e.attributes.compList;-1===a.indexOf(t)&&a.push(t)}else{var n=[];n.push(t),e.attributes.compList=n}cocoa.insertAdjacentElement(t,"beforeend",e)},resetComp:function(e,t){cocoa.appendTo(t,e),cocoa.removeComp(t)},getCompsDataById:function(e,t,a){t&&t.addEventListener("click",function(n){var i=[];for(var r in e)if("undefined"!=typeof document.getElementById(e[r]).children[0]){var o=document.getElementById(e[r]).children[0].childNodes[0];i.push(o)}var s={};for(var l in i)if(i[l]!==t&&"length"!==l&&"item"!==l&&null!==i[l]){var d=i[l].attributes.tempdatas;for(var c in d)s[c]=d[c]}a&&a(s)})},blindTo:function(e,t,a){console.info(t)},compRecord:function(e,t,a){if("undefined"!=typeof e){var n=e;n[t]=a,e=n}else{var i={};i[t]=a,e=i}return e},getEventTarget:function(e){return e=e?e:window.cEvent,e.srcElement?e.srcElement:e.target},insertAdjacentElement:function(e,t,a){"beforebegin"===t?a.parentNode.insertBefore(e,a):"afterbegin"===t?a.insertBefore(e,a.firstChild):"beforeend"===t?a.appendChild(e):"afterend"===t&&(a.nextSibling?a.parentNode.insertBefore(e,a.nextSibling):a.parentNode.appendChild(e))}},pagingComp={init:function(e,t,a){"undefined"!=typeof this.pageE&&this.pageE[e]&&cocoa.removeComp(this.pageE[e]),this.focusId=e,this.bgIndex=0,this.endIndex=a,this.pCount=a,this.currPage=1,this.allPage=(t.length-(t.length%a===0?-a:t.length%a))%a,this.arrComps=t;var n=t.length;this.compsLength=n,n%a===0?this.allPage=n/a:this.allPage=(n-n%a)/a+1,pagingComp.startPage();var i=document.getElementById(e),r=pagingComp.pageButton();if(cocoa.appendTo(i,r),"undefined"!=typeof this.pageButton){var o=this.pageButton;o[this.focusId]=r,this.pageButton=o;var s=this.getPageComp;s[this.focusId]=i,this.getPageComp=s}else{var l={},d={};l[this.focusId]=r,d[this.focusId]=i,this.pageButton=l,this.getPageComp=d}},startPage:function(){cocoa.clearCompsById([this.focusId]);var e=[],t=this.endIndex;t>this.compsLength&&(t=this.compsLength);for(var a=this.bgIndex;t>a;a++)this.arrComps[a].hidden=!1,e.push(this.arrComps[a]);cocoa.addComps(this.focusId,e)},pageButton:function(){var e=document.createElement("div");e.style.display="inline-block",e.style.width="100%";var t=document.createElement("div");t.style["float"]="left",t.style.marginLeft="20px";var a=document.createElement("span");a.innerHTML="第1页/共"+this.allPage+"页 "+this.compsLength+"条记录",t.appendChild(a);var n=document.createElement("div");n.style["float"]="left",n.style["float"]="right",n.style.marginRight="20px";var i=document.createElement("span");i.innerHTML="上一页",i.style.cursor="default",i.style.color="#9d9d9d",i.style.marginRight="10px",i.onclick=function(){if(1!==pagingComp.currPage){i.style.color="black",r.style.color="black",r.style.cursor="pointer";var e=parseInt(pagingComp.bgIndex)-parseInt(pagingComp.pCount),t=parseInt(pagingComp.endIndex)-parseInt(pagingComp.pCount),n=parseInt(pagingComp.currPage)-parseInt("1");pagingComp.currPage=n,pagingComp.bgIndex=e,pagingComp.endIndex=t,pagingComp.startPage(),a.innerHTML="第"+n+"页/共"+pagingComp.allPage+"页 "+pagingComp.compsLength+"条记录",1===pagingComp.currPage&&(i.style.color="#9d9d9d",i.style.cursor="default")}else r.style.color="black"};var r=document.createElement("span");return r.innerHTML="下一页",r.style.cursor="pointer",r.onclick=function(){if(pagingComp.currPage!==pagingComp.allPage){i.style.color="black",i.style.cursor="pointer";var e=parseInt(pagingComp.bgIndex)+parseInt(pagingComp.pCount),t=parseInt(pagingComp.endIndex)+parseInt(pagingComp.pCount),n=parseInt(pagingComp.currPage)+parseInt("1");pagingComp.bgIndex=e,pagingComp.endIndex=t,pagingComp.currPage=n,pagingComp.startPage(),a.innerHTML="第"+n+"页/共"+pagingComp.allPage+"页 "+pagingComp.compsLength+"条记录",pagingComp.currPage===pagingComp.allPage&&(r.style.color="#9d9d9d",r.style.cursor="default")}else i.style.color="black"},n.appendChild(i),n.appendChild(r),e.appendChild(t),e.appendChild(n),this.pageE=cocoa.compRecord(this.pageE,this.focusId,e),e},getPageButton:function(e){return this.pageButton[e]},getPageComp:function(e){return this.pageE[e]}},radioComp={init:function(e,t){var a=document.createElement("div");if(a.setAttribute("class","marTpad"),"undefined"!=typeof e.title){var n=document.createElement("label");n.setAttribute("class","marR10"),n.innerHTML=e.title,a.appendChild(n)}var i=e.list,r={};for(var o in i){var s=i[o].value,l=i[o].text,d=document.createElement("input");s===e.defaultChecked&&(d.setAttribute("checked","checked"),r.value=s,r.text=l),d.setAttribute("type","radio"),d.setAttribute("name",e.name),d.setAttribute("value",s),d.setAttribute("text",l);var c=document.createElement("span");c.setAttribute("class","marR10"),c.innerHTML=l,a.appendChild(d),a.appendChild(c)}a.addEventListener("click",function(e){var n=cocoa.getEventTarget(e),i=n.nodeName;if("INPUT"===i){r.value=n.attributes.value.value,r.text=n.attributes.text.value;var o={radio:r};if(a.attributes.tempdatas=o,t)return t(o)}});var u={radio:r};return a.attributes.tempdatas=u,a}},selectComp={init:function(e,t,a){var n=parseInt(e)+36,i=parseInt(e)+34,r=document.createElement("div");r.style.width=n+"px",r.style.position="relative",r.style.zIndex="10000",r.style.margin="0",r.style.padding="0",r.style.fontSize="13px";var o=document.createElement("cite");o.innerHTML=t.cite,o.style.width=e+"px",o.style.height="24px",o.style.lineHeight="24px",o.style.display="block",o.style.color="#807a62",o.style.cursor="pointer",o.style.fontStyle="normal",o.style.paddingLeft="4px",o.style.paddingRight="30px",o.style.border="1px solid #333",o.style.overflowX="hidden",o.style.background="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAMAAABcOc2zAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAJUExURXt7e3p6ev////MnDfwAAAADdFJOU///ANfKDUEAAAAiSURBVHjaYmBCAwzUEWCAACQVyHyIFgYGRjQzGCiyFiDAAI3WAWIk9jYnAAAAAElFTkSuQmCC) no-repeat right center";var s=document.createElement("ul");s.style.maxHeight="193px",s.style.overflowY="scroll",o.onclick=function(e){e.stopPropagation(e),"none"===s.style.display?s.style.display="block":s.style.display="none"},document.body.onclick=function(e){s.style.display="none"},s.style.margin="-1px 0px 0px",s.style.padding="0px",s.style.fontSize="13px",s.style.width=i+"px",s.style.border="1px solid #333333",s.style.position="absolute",s.style.zIndex="20000",s.style.display="none",s.style.backgroundColor="#ffffff";var l=t.list,d="",c="";for(var u in l){var p=document.createElement("li");p.style.height="24px",p.style.lineHeight="24px",p.style.listStyle="none",p.style.margin="0px",p.style.padding="0px",p.style.fontSize="13px",p.style.width="100%";var m=document.createElement("span");m.setAttribute("value",l[u].value),m.innerHTML=l[u].text,m.style.background="#fff",m.style.display="block",m.style.height="24px",m.style.color="#333",m.style.textDecoration="none",m.style.paddingLeft="10px",m.style.paddingRight="10px",p.appendChild(m),s.appendChild(p),"undefined"!=typeof t.defaultCheck&&""!==t.defaultCheck&&t.defaultCheck===l[u].value&&(o.innerHTML=l[u].text,d=l[u].value,c=l[u].text)}s.addEventListener("mouseover",function(e){var t=cocoa.getEventTarget(e);"SPAN"===t.nodeName&&(t.style.background="#ccc")}),s.addEventListener("mouseout",function(e){var t=cocoa.getEventTarget(e);"SPAN"===t.nodeName&&(t.style.background="#fff")}),s.onclick=function(e){var n=cocoa.getEventTarget(e).nodeName;if("SPAN"===n){s.style.display="none";var i=e.target.attributes.value.value,l=e.target.innerHTML;o.innerHTML=l;var d={value:i,text:l},c=new Object({});if(c.id=t.id,c.value=i,c.text=l,r.attributes.tempdatas=cocoa.compRecord(r.attributes.tempdatas,"select"+t.id,c),a)return a(d)}};var v=new Object({}),g="select"+t.id;if(v.id=t.id,v.value=d,v.text=c,r.appendChild(o),r.appendChild(s),"undefined"!=typeof t.title){var f=document.createElement("div");f.setAttribute("class","marTpad"),f.style.display="inline-block";var C=document.createElement("label");C.setAttribute("class","marR10"),C.style["float"]="left",C.innerHTML=t.title,r.style["float"]="left",f.appendChild(C),f.appendChild(r),r=f}else r.style["float"]="left";return r.attributes.tempdatas=cocoa.compRecord(r.attributes.tempdatas,g,v),r}},textAreaComp={init:function(e){var t=document.createElement("div");t.setAttribute("class","messageBox");var a=document.createElement("label");a.setAttribute("class","MBlabel"),""!==e&&(a.innerHTML=e+"：");var n=document.createElement("div");n.setAttribute("class","messageBox-textarea");var i=document.createElement("textarea");i.setAttribute("class","paddLR10"),i.setAttribute("rows","3"),i.setAttribute("cols","30"),i.style.width="100%",i.style.height="100%",i.onblur=function(){var a={};a["textarea"+e]=i.value,t.attributes.tempdatas=a};var r={};return r["textarea"+e]="",t.attributes.tempdatas=r,n.appendChild(i),t.appendChild(a),t.appendChild(n),t}},windowDragComp={init:function(e,t){var a=document.createElement("div");a.setAttribute("class","wdc-parent"),a.style.position="absolute",a.style.left=e,a.style.top=t,a.style.width="400px",a.style.height="100px";var n=document.createElement("div");n.style.cursor="pointer",n.setAttribute("class","wdc-dragTitle");var i=document.createElement("span");i.innerHTML="可拖动的窗口标题",n.appendChild(i);var r=document.createElement("div");r.style.cursor="default",a.appendChild(n),a.appendChild(r),document.body.appendChild(a),this.parentE=a,this.addDrag(n,a)},remove:function(){this.parentE&&cocoa.removeComp(this.parentE)},addDrag:function(e,t){var a,n,i=!1,r=document.body.scrollWidth,o=document.body.scrollHeight,s=t.style.width,l=t.style.height;e.onmousedown=function(e){i=!0,a=e.pageX-parseInt(t.style.left),n=e.pageY-parseInt(t.style.top)},document.body.onmousemove=function(e){if(i){var d=e.pageX-a,c=e.pageY-n,u=r-parseInt(s),p=o-parseInt(l);d>0&&u>d&&c>0&&p>c&&(t.style.left=d+"px",t.style.top=c+"px")}},document.body.onmouseup=function(){i=!1},e.onmouseout=function(e){if(console.info("out"),i){var d=e.pageX-a,c=e.pageY-n,u=r-parseInt(s),p=o-parseInt(l);d>0&&u>d&&c>0&&p>c&&(t.style.left=d+"px",t.style.top=c+"px")}}}},browerVComp={init:function(e){var t=document.createElement("div");t.setAttribute("class","version-box");var a=document.createElement("div");a.setAttribute("class","bvDivTitle-1");var n=document.createElement("span");n.innerHTML="版本推荐";var i=document.createElement("p");a.appendChild(n),a.appendChild(i),i.setAttribute("class","bvclose"),i.onclick=function(){return browerVComp.close(),e?e(!0):void 0};var r=document.createElement("div");r.setAttribute("class","version-con"),t.appendChild(a),t.appendChild(r);var o=document.createElement("div");o.setAttribute("class","vesion-left");var s=document.createElement("img");o.appendChild(s);var l=document.createElement("div");l.setAttribute("class","vesion-right");var d=document.createElement("div");d.setAttribute("class","clear"),r.appendChild(o),r.appendChild(l),r.appendChild(d);var c=document.createElement("p");c.setAttribute("class","version-title"),c.innerHTML="浏览器版本推荐";var u=document.createElement("div");u.setAttribute("class","version-option"),l.appendChild(c),l.appendChild(u);var p=document.createElement("ul");u.appendChild(p);var m=document.createElement("li");m.innerHTML="IE10及以上版本";var v=document.createElement("li");v.innerHTML="火狐38.0.1及以上版本";var g=document.createElement("li");g.innerHTML="谷歌42.0.2311.152及以上版本";var f=document.createElement("li");f.innerHTML="360安全浏览器7.1.1及以上版本";var C=document.createElement("li");C.innerHTML="360极速浏览器7.5.3.318及以上版本",p.appendChild(m),p.appendChild(v),p.appendChild(g),p.appendChild(f),p.appendChild(C),s.setAttribute("src","data:image/gif;base64,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"),document.body.appendChild(t),this.parentE=t},close:function(){"undefined"!=typeof this.parentE&&cocoa.removeComp(this.parentE)}},effectAreaComp={init:function(e){var t=document.createElement("div");if(t.setAttribute("class","influenceArea marTpad"),"undefined"!=typeof e.title){var a=document.createElement("label");a.setAttribute("class","EAlabel"),a.setAttribute("class","marR10"),a.innerHTML=e.title,t.appendChild(a)}var n=document.createElement("div");n.setAttribute("class","influenceArea-box");var i=document.createElement("ul");i.setAttribute("class","influenceArea-box-ul");var r=e.list,o="";for(var s in r){var l=document.createElement("li");l.setAttribute("class","influenceArea-box-ul-li"),l.setAttribute("value",r[s].value),l.setAttribute("text",r[s].text),o+=r[s].value+",";var d=document.createElement("a");d.setAttribute("class","influenceArea-box-ul-li-a"),d.innerHTML=r[s].text;var c=document.createElement("i");c.setAttribute("class","influenceArea-box-ul-li-a-i"),c.setAttribute("value",r[s].value),c.innerHTML="x",d.appendChild(c),l.appendChild(d),i.appendChild(l)}i.addEventListener("click",function(e){var a=cocoa.getEventTarget(e);if("I"===a.nodeName){var n=a.parentElement.parentElement;if("undefined"!=typeof n.attributes.value){var i=n.attributes.value.value,r=t.attributes.tempdatas.areaList;r=r.replace(i+",",""),t.attributes.tempdatas.areaList=r,cocoa.removeComp(n)}}}),n.appendChild(i),t.appendChild(n);var u={areaList:o};return t.attributes.tempdatas=u,t}},targetMsgComp={init:function(e,t,a,n){function i(e){if(e.checked){var t=textAreaComp.init(e.text);cocoa.appendTo(f,t),checkBoxComp.blindTo(t,e.value)}else"undefined"!=typeof e.blindComp&&cocoa.removeComp(e.blindComp)}function r(e){var t={cite:"请选择种类",id:"kind",defaultCheck:"",list:""},a={typeCode:e.value};$.ajax({type:"GET",async:!1,data:a,url:"http://127.0.0.1:8080/dss-data/target/target!getDemagesKindByType.action",success:function(e){t.list=e}}),k&&cocoa.removeComp(k),t.list.length>0&&(k=selectComp.init("100",t),cocoa.insertTo(p,k))}function o(e){if("reset"===e)loadTargetMsg();else{var t="";if(""===e.textareaLED显示屏&&(t="请填写LED显示屏消息内容"),""===e.textarea大喇叭&&(t="请填写大喇叭消息内容"),""===e.textarea短信&&(t="请填写短信消息内容"),""===e.areaList&&(t="影响区域不能为空"),"undefined"!=typeof e.selectkind&&""===e.selectkind.text&&(t="请选择灾害种类"),""===e.selecttype.text&&(t="请选择灾害类型"),"undefined"==typeof e.checkBox[0]&&(t="请选择消息渠道"),""===t){var a="",n="",i="",r="";"19000"===e.selecttype.value?(a="",r=""):(a=e.selectkind.value,r=e.selectkind.text),n=e.selecttype.value,i=e.selecttype.text;var o="http://127.0.0.1:8080/dss-data/target/target!sendMsg.action",s="",l="";for(var d in e.checkBox){var c=e.checkBox[d].text;s+=c+",","短信"===c?l+="短信:"+e.textarea短信+"|":"大喇叭"===c?l+="大喇叭:"+e.textarea大喇叭+"|":"LED显示屏"===c&&(l+="LED显示屏:"+e.textareaLED显示屏+"|")}l=encodeURI(l),s=encodeURI(s),i=encodeURI(i),r=encodeURI(r);var u={areaCode:cityCode,msgWay:s,typeName:i,kindName:r,demageType:n,demageKind:a,demageLevel:e.radio.value,effectArea:e.areaList,wayContent:l};$.ajax({type:"GET",async:!1,data:u,url:o,success:function(e){targetTrackComp.initMin("trackMin",e),$("#msgMin").show(),$("#information_issuing").hide()}})}else y.innerHTML=t}}var s={title:"消息渠道：",defaultChecked:[],list:[{value:"1",text:"短信"},{value:"2",text:"大喇叭"},{value:"3",text:"LED显示屏"}]};if(t instanceof Array){var l=[];for(var d in s.list)-1!==t.indexOf(s.list[d].text)&&l.push(s.list[d].value);s.defaultChecked=l}var c=checkBoxComp.init(s,i);c.setAttribute("class","marTpad");var u={title:"灾害类型：",cite:"请选择类型",id:"type",defaultCheck:"",list:""};$.ajax({type:"GET",async:!1,url:"http://127.0.0.1:8080/dss-data/target/target!getDemagesType.action",success:function(e){u.list=e}});var p=selectComp.init("100",u,r),m={title:"灾害等级：",name:"warnLevel",defaultChecked:"6",list:[{value:"1",text:"红"},{value:"2",text:"橙"},{value:"3",text:"黄"},{value:"4",text:"蓝"},{value:"5",text:"白"},{value:"6",text:"其他"}]};if("string"==typeof a)for(var v in m.list)if(-1!==a.indexOf(m.list[v].text)){m.defaultChecked=m.list[v].value;break}var g=radioComp.init(m),f=effectAreaComp.init(n),C=document.createElement("div"),y=document.createElement("span");y.setAttribute("class","paddLR10 alarmColor"),y.style["float"]="left",y.innerHTML="",C.appendChild(y);var h={list:[{value:"reset",text:"重置"},{value:"send",text:"发送"}]},A=buttonComp.init(h,"tempTarget-btn");cocoa.addComps(e,[c,p,g,f,C,A],A,"send",o);var b=s.list;for(var x in b){var E=b[x].value;if(-1!==s.defaultChecked.indexOf(E)){var T=textAreaComp.init(b[x].text);checkBoxComp.blindTo(T,b[x].value),cocoa.appendTo(f,T)}}var k=null}},targetTrackComp={initMin:function(e,t){var a="http://127.0.0.1:8080/dss-data/track/track!getTrackMsgById.action",n={idArray:t.toString()};$.ajax({type:"GET",async:!1,data:n,url:a,success:function(t){var a=[];for(var n in t)a.push(trackComp.init(t[n]));cocoa.addComps(e,a)}})},initMax:function(e){function t(t){var a="";if(""===t.selectdemageType.text?a="请选择查询类型":""===t.selectdemageContent.text&&(a="请选择查询内容"),s.innerHTML=a,""===a){var n=t.selectdemageType.text,i=t.selectdemageContent.text,r="";"渠道"===n?r="receiver='"+i+"'":"灾害"===n?(-1!==i.indexOf("预警")&&(-1!==i.indexOf("红色")?i="1":-1!==i.indexOf("橙色")?i="2":-1!==i.indexOf("黄色")?i="3":-1!==i.indexOf("蓝色")?i="4":-1!==i.indexOf("白色")?i="5":-1!==i.indexOf("其他")&&(i="6")),r="kind_name='"+i+"' or type_name = '"+i+"' or warn_level = '"+i+"'"):"内容"===n&&(r="content like '%"+i+"%';");var o="http://127.0.0.1:8080/dss-data/track/track!getTrackMsgByFilter.action";r=encodeURI(r);var l={sql:r};$.getJSON(o,l,function(t){var a=[];for(var n in t)a.push(trackComp.init(t[n]));pagingComp.init(e,a,6)})}}function a(e){var t={cite:"请选择内容",id:"demageContent",defaultCheck:"",list:""},a=e.text;a=encodeURI(a);var n="http://127.0.0.1:8080/dss-data/target/target!getTypeByFilter.action",i={filter:a};$.getJSON(n,i,function(e){t.list=e,cocoa.clearCompsById(["tragetKind"]);var a=selectComp.init("100",t);cocoa.addComps("tragetKind",[a])})}cocoa.clearCompsById(["trackMax","tragetType","tragetKind","tragetChose"]);var n={cite:"请选择类型",id:"demageType",defaultCheck:"",list:[{value:"1",text:"渠道"},{value:"2",text:"灾害"},{value:"3",text:"内容"}]},i=selectComp.init("100",n,a);cocoa.addComps("tragetType",[i]);var r={list:[{value:"sure",text:"确定"}]},o=buttonComp.init(r,"msgTrack-btn");o.style["float"]="left",cocoa.addComps("tragetChose",[o]),cocoa.getCompsDataById(["tragetType","tragetKind"],o,t);var s=document.createElement("span");s.setAttribute("class","paddLR10 alarmColor"),s.style["float"]="left",s.style.marginTop="3px",s.innerHTML="",cocoa.appendTo(o,s);var l="http://127.0.0.1:8080/dss-data/track/track!getAllTrackMsgByCode.action",d={areaCode:cityCode};$.ajax({type:"GET",data:d,url:l,success:function(t){var a=[];for(var n in t)a.push(trackComp.init(t[n]));pagingComp.init(e,a,6)}})},clearTrackInterval:function(){trackComp.clearTrackInterval()}},trackComp={init:function(e){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","inforTracking-box");var a=document.createElement("ul"),n=e.list,i={};for(var r in n){var o=document.createElement("li");o.innerHTML=n[r].text;var s=document.createElement("span");if(s.innerHTML=n[r].value,o.appendChild(s),"日期："===n[r].text){var l=document.createElement("span");l.setAttribute("class","floatR10"),l.style.color="red",o.appendChild(l),i[e.id]=t,t.belongsChild=l,l.attributes.msg=e.msg,l.attributes.msgId=e.id,l.attributes.status=e.status,this.compsRecord=cocoa.compRecord(this.compsRecord,e.id,t)}a.appendChild(o)}"undefined"!=typeof this.intervals&&clearInterval(this.intervals);var d="http://127.0.0.1:8080/dss-data/track/track!getTrackMsgById.action",c=setInterval(function(){var e=[];for(var t in trackComp.compsRecord)if(!trackComp.compsRecord[t].hidden){var a=trackComp.compsRecord[t].belongsChild;"0"===a.attributes.status&&e.push(a.attributes.msgId)}var n={idArray:e.toString()};$.ajax({type:"GET",data:n,url:d,success:function(e){for(var t in trackComp.compsRecord)if(!trackComp.compsRecord[t].hidden){var a=trackComp.compsRecord[t].belongsChild;if("0"===a.attributes.status)for(var n in e)if(e[n].id===a.attributes.msgId){a.innerHTML=e[n].msg,a.attributes.status=e[n].status;break}}}})},5e3);return t.appendChild(a),this.intervals=c,t},initTrackStatus:function(e){for(var t in e)console.info(!e[t].hidden);trackComp.compsRecord=e},clearTrackInterval:function(){clearInterval(this.intervals)}};